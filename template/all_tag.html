{{ template "layout" . }}

{{ define "title" }}{{ .site.Name }}{{ end }}
{{ define "moreHeaders" }}
<meta name="description" content="{{ .site.Description }}">
{{ end }}
{{ define "moreStyles" }}
<style>
    {{ DumpCSS "./static/css/index.css" }}
</style>
{{ end }}
{{ define "moreScripts" }}
{{ end }}
{{ define "content" }}
{{ $site := .site }}
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader">
    <div class="md-section-divider"></div>
    <div class="md-section-divider"></div>
    <a href="{{ $site.BaseUrl }}" class="no-color"><h1>{{ $site.Name }}</h1></a>
    <hr>
    <div class="md-section-divider"></div>
    {{ $saveNoteListMap := .noteListMap }}
    {{ $saveTagListMap := .tagListMap }}
    {{ range $key, $value := .tagList}}
        {{ $noteList := index $saveNoteListMap $value.Id }}
        {{ if $noteList }}
            <h2>{{ $value.Name }}</h2>
            <ul>
                {{ range $key, $value := $noteList }}
                    <li>
                        <hr>
                        <div class="md-section-divider">
                        </div>
                        <h2>
                            <a class="no-color" href="/{{ $site.NoteUrl }}/{{$value.Id}}">
                                {{$value.Title}}
                            </a>
                        </h2>
                        <p>
                            <i class="icon-tags"></i>
                            {{ $tagList := index $saveTagListMap $value.Id }}
                            {{ range $key, $value := $tagList }}
                            <a href="/{{ $site.TagUrl }}/{{$value.Id}}"><code>{{- $value.Name -}}</code></a>
                            {{ end }}
                        </p>
                        <p>
                            {{$value.Preview}}
                        </p>
                        <h6>
                            <i class="icon-time"></i>
                            {{ $value.FormattedTimestamp }}
                        </h6>
                    </li>
                {{ end }}
            </ul>
        {{ end }}
    {{ end }}

    <div class="md-section-divider"></div><hr>
    <a href="/"><i class="icon-chevron-left"></i> 返回</a>
</div>
{{ end }}
