{{ template "layout" . }}

{{ define "title" }}
分类列表 | {{ .site.Name }}
{{ end }}
{{ define "moreHeaders" }}
<meta name="description" content="分类列表 | {{ .site.Description }}">
{{ end }}
{{ define "moreStyles" }}
{{ end }}
{{ define "moreScripts" }}
{{ end }}
{{ define "content" }}
{{ $site := .site }}
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader">
    <h1><a href="{{ $site.BaseUrl }}" class="no-color">{{ $site.Name }}</a></h1>
    <hr>
    {{ $saveNoteListMap := .noteListMap }}
    {{ $saveTagListMap := .tagListMap }}
    {{ range $key, $value := .tagList}}
        {{ $noteList := index $saveNoteListMap $value.Id }}
        {{ if $noteList }}
            <h2>{{ $value.Name }}</h2>
            <ul>
                {{ range $key, $value := $noteList }}
                    <li>
                        <hr>
                        <h2>
                            <a class="no-color" href="/{{ $site.NoteUrl }}/{{if $value.Notename.Valid}}{{$value.Notename.String}}{{else}}{{$value.Id}}{{end}}">
                                {{$value.Title}}
                            </a>
                        </h2>
                        <p>
                            <i class="icon-tags"></i>
                            {{ $tagList := index $saveTagListMap $value.Id }}
                            {{ range $key, $value := $tagList }}
                            <a href="/{{ $site.TagUrl }}/{{$value.Name}}"><code>{{- $value.Name -}}</code></a>
                            {{ end }}
                        </p>
                        <p>
                            {{$value.Preview}}
                        </p>
                        <h6>
                            <i class="icon-time"></i>
                            {{ $value.FormattedTimestamp }}
                        </h6>
                    </li>
                {{ end }}
            </ul>
        {{ end }}
    {{ end }}

    <hr>
    <a href="/"><i class="icon-home"></i> 返回</a>
</div>
{{ end }}
